<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Python学习(二)-----八皇后问题 · 人依旧♀Blog</title><meta name="description" content="Python学习(二)-----八皇后问题 - 人依旧"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="short icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yijiu.ren/atom.xml" title="人依旧♀Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/images/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">Archive</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="https://github.com/renyijiu" target="_blank" class="nav-list-link">GitHub</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">Rss</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Python学习(二)-----八皇后问题</h1><div class="post-info">2014年11月19日</div><div class="post-content"><h2 id="八皇后问题"><a href="#八皇后问题" class="headerlink" title="八皇后问题"></a>八皇后问题</h2><p>在8*8的国际象棋上摆放八个皇后，使其不能互相攻击，即任意两个皇后都不能处于同一行、同一列或同一斜线上，问有多少种摆法？<br><a id="more"></a></p><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>首先尝试放置第一个皇后(在第一行)，然后放置第二个皇后，以此类推。如果发现不能放下最后一个皇后，就回溯到上一步，试着将皇后放到其他的位置。</p><h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><p>使用生成器。生成器是逐渐产生结果的复杂递归算法的理想实现工具。本解决方法是 &lt;<strong>pyhton基础教程</strong> &gt;中的代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#定义冲突函数,用于判断下一个皇后的位置会不会有冲突。</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">conflict</span> <span class="params">(state , nextX)</span> :</span>       <span class="comment">#nextX代表下一个皇后的水平位置(列)，nextY代表垂直位置</span></div><div class="line">	nextY = len (state)         <span class="comment">#state[0] = 0,表示皇后处于第一行第一列(从0开始计数)</span></div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range (nextY) :    <span class="comment">#range  包括起始，不包括结尾，后面的数为下个序列第一个数的编号</span></div><div class="line">		<span class="keyword">if</span> abs (state[i]-nextX) <span class="keyword">in</span> (<span class="number">0</span>,nextY-i) :</div><div class="line">		              <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">	<span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"></div><div class="line"><span class="comment">#如果只剩一个皇后没有放置，那么遍历它所有可能的位置，并且返回没有冲突的位置</span></div><div class="line"> <span class="function"><span class="keyword">def</span> <span class="title">queens</span> <span class="params">(num,state)</span> :</span>    <span class="comment">#num参数是皇后的总数,state参数是存放前面皇后的位置信息的元祖</span></div><div class="line"> 	<span class="keyword">if</span> len(state) == num<span class="number">-1</span>:</div><div class="line"> 		<span class="keyword">for</span> pos <span class="keyword">in</span> range (num) :</div><div class="line"> 			<span class="keyword">if</span> <span class="keyword">not</span> conflict(state, pos) :</div><div class="line"> 				<span class="keyword">yield</span> pos</div><div class="line"></div><div class="line"><span class="comment">#程序从前面的皇后得到了包含信息的元组,并且要为后面的皇后提供当前皇后的每种合法的位置信息</span></div><div class="line">.......</div><div class="line">      <span class="keyword">else</span> :</div><div class="line">      	<span class="keyword">for</span> pos <span class="keyword">in</span> range(num) :</div><div class="line">      		<span class="keyword">if</span> <span class="keyword">not</span> conflict (state, pos) :</div><div class="line">      			<span class="keyword">for</span> result <span class="keyword">in</span> queens(num,state + (pos,)) :    <span class="comment">#生成器，解决问题的关键所在</span></div><div class="line">      				<span class="keyword">yield</span> (pos,) + result</div><div class="line"></div><div class="line"><span class="comment">#定义一个输出函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">prettyprint</span><span class="params">(solution)</span> :</span></div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">line</span><span class="params">(pos,length = len<span class="params">(solution)</span>)</span> :</span></div><div class="line">		<span class="keyword">return</span> <span class="string">'. '</span> * (pos) + <span class="string">'X '</span> + <span class="string">'. '</span> * (length - pos <span class="number">-1</span>)</div><div class="line">	<span class="keyword">for</span> pos <span class="keyword">in</span> solution :</div><div class="line">		<span class="keyword">print</span> line(pos)</div><div class="line"></div><div class="line"><span class="comment">#中间优化的代码</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">queens</span><span class="params">(num = <span class="number">8</span>,state = <span class="params">()</span>)</span> :</span></div><div class="line">	<span class="keyword">for</span> pos <span class="keyword">in</span> range (num) :</div><div class="line">		<span class="keyword">if</span> <span class="keyword">not</span> conflict(state, pos) :</div><div class="line">			<span class="keyword">if</span> len(state) == num <span class="number">-1</span> :</div><div class="line">				<span class="keyword">yield</span> (pos,)</div><div class="line">			<span class="keyword">else</span> :</div><div class="line">				<span class="keyword">for</span> <span class="keyword">return</span> <span class="keyword">in</span> queens(num,state + (pos,)) :</div><div class="line">					<span class="keyword">yield</span> (pos,) + result</div></pre></td></tr></table></figure></div></article></div></section><footer><div class="paginator"><a href="/2014/11/10/Python学习-一-递归/" class="prev">上一篇</a><a href="/2014/11/28/Ubuntu下搭建LAMP服务器/" class="next">下一篇</a></div><div class="copyright"><p>© 2014 - 2017 <a href="http://yijiu.ren">人依旧</a>, Live For Dream, Dream For Love.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>!function(e,t,a,n,c,o){e.GoogleAnalyticsObject=n,e[n]||(e[n]=function(){(e[n].q=e[n].q||[]).push(arguments)}),e[n].l=+new Date,c=t.createElement(a),o=t.getElementsByTagName(a)[0],c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script","ga"),ga("create","UA-78885477-1","auto"),ga("send","pageview")</script></body></html>